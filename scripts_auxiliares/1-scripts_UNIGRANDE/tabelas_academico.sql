-- Generated by Oracle SQL Developer Data Modeler Version: 2.0.0 Build: 570
--   at:        2011-09-20 13:12:30
--   site:      Oracle Database 10g
--   type:      Oracle Database 10g

alter session set "_ORACLE_SCRIPT"=true;  


CREATE TABLE ALUNOS 
    ( 
     MAT_ALU NUMBER (10)  NOT NULL , 
     NOM_ALU VARCHAR2 (50)  NOT NULL , 
     TOT_CRED NUMBER (3)  NOT NULL , 
     DAT_NASC DATE  NOT NULL , 
     MGP NUMBER (4,2)  NOT NULL , 
     COD_CURSO NUMBER (3)  NOT NULL 
    ) TABLESPACE DADOS_ACAD
;



ALTER TABLE ALUNOS 
    ADD CONSTRAINT ALU_MAT_ALU_CK 
    CHECK (MAT_ALU > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE ALUNOS 
    ADD CONSTRAINT ALU_TOT_CRED_CK 
    CHECK (TOT_CRED >= 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE ALUNOS 
    ADD CONSTRAINT ALU_MGP_CK 
    CHECK (MGP BETWEEN 0 and 10)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE ALUNOS 
    ADD CONSTRAINT ALU_COD_CURSO_CK 
    CHECK (COD_CURSO > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;

CREATE UNIQUE INDEX ALU_PKX ON ALUNOS 
    ( 
     MAT_ALU ASC 
    ) TABLESPACE INDICES_ACAD
;

CREATE INDEX ALU_CUR_FKX ON ALUNOS 
    ( 
     COD_CURSO ASC 
    ) TABLESPACE INDICES_ACAD 
;

ALTER TABLE ALUNOS 
    ADD CONSTRAINT ALU_PK PRIMARY KEY ( MAT_ALU );


CREATE TABLE CURSOS 
    ( 
     COD_CURSO NUMBER (3)  NOT NULL , 
     NOM_CURSO VARCHAR2 (40)  NOT NULL , 
     TOT_CRED NUMBER (3)  NOT NULL , 
     IDT_PROF NUMBER (6) 
    ) TABLESPACE DADOS_ACAD
;



ALTER TABLE CURSOS 
    ADD CONSTRAINT CUR_COD_CURSO_CK 
    CHECK (COD_CURSO > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE CURSOS 
    ADD CONSTRAINT CUR_TOT_CRED_CK 
    CHECK (TOT_CRED >= 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE CURSOS 
    ADD CONSTRAINT CUR_IDT_PROF_CK 
    CHECK (IDT_PROF > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;

CREATE UNIQUE INDEX CUR_PKX ON CURSOS 
    ( 
     COD_CURSO ASC 
    ) TABLESPACE INDICES_ACAD
;
CREATE INDEX CUR_PROF_FKX ON CURSOS 
    ( 
     IDT_PROF ASC 
    ) TABLESPACE INDICES_ACAD
;

ALTER TABLE CURSOS 
    ADD CONSTRAINT CUR_PK PRIMARY KEY ( COD_CURSO ) ;


CREATE TABLE DISCIPLINAS 
    ( 
     COD_DISC NUMBER (6)  NOT NULL , 
     NOM_DISC VARCHAR2 (50)  NOT NULL , 
     CREDITOS NUMBER (2)  NOT NULL , 
     TPO_DISC CHAR (1)  NOT NULL , 
     HORAS_OBRIG NUMBER (2) , 
     LIMITE_FALTAS NUMBER (2) 
    ) TABLESPACE DADOS_ACAD
;



ALTER TABLE DISCIPLINAS 
    ADD CONSTRAINT DISC_COD_DISC_CK 
    CHECK (COD_DISC > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE DISCIPLINAS 
    ADD CONSTRAINT DISC_TPO_DISC_CK 
    CHECK (TPO_DISC IN ( 'T', 'N', 'E', 'S' ))
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE DISCIPLINAS 
    ADD CONSTRAINT DISC_HORAS_OBRIG_CK 
    CHECK (HORAS_OBRIG >= 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE DISCIPLINAS 
    ADD CONSTRAINT DISC_LIM_FAL_CK 
    CHECK (LIMITE_FALTAS >= 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;

CREATE UNIQUE INDEX DISC_PKX ON DISCIPLINAS 
    ( 
     COD_DISC ASC 
    ) TABLESPACE INDICES_ACAD
;

ALTER TABLE DISCIPLINAS 
    ADD CONSTRAINT DISC_PK PRIMARY KEY ( COD_DISC ) ;


CREATE TABLE HISTORICOS 
    ( 
     ANO NUMBER (4)  NOT NULL , 
     SEMESTRE NUMBER (1)  NOT NULL , 
     MAT_ALU NUMBER (10)  NOT NULL , 
     COD_DISC NUMBER (6)  NOT NULL , 
     SITUACAO CHAR (2)  NOT NULL , 
     MEDIA NUMBER (3,1)  NOT NULL , 
     FALTAS NUMBER (3)  NOT NULL 
    ) TABLESPACE DADOS_ACAD
;



ALTER TABLE HISTORICOS 
    ADD CONSTRAINT HIST_SITUACAO_CK 
    CHECK (SITUACAO IN ( 'AP', 'RM', 'RF' ))
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE HISTORICOS 
    ADD CONSTRAINT HIST_MEDIA_CK 
    CHECK (MEDIA BETWEEN 0 AND 10)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE HISTORICOS 
    ADD CONSTRAINT HIST_FALTAS_CK 
    CHECK (FALTAS BETWEEN 0 AND 999)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;

CREATE UNIQUE INDEX HIST_PKX ON HISTORICOS 
    ( 
     ANO ASC , 
     SEMESTRE ASC , 
     MAT_ALU ASC , 
     COD_DISC ASC 
    ) TABLESPACE INDICES_ACAD
;
CREATE INDEX HIST_PER_FKX ON HISTORICOS 
    ( 
     ANO ASC , 
     SEMESTRE ASC 
    ) TABLESPACE INDICES_ACAD
;
CREATE INDEX HIST_ALU_FKX ON HISTORICOS 
    ( 
     MAT_ALU ASC 
    ) TABLESPACE INDICES_ACAD
;
CREATE INDEX HIST_DISC_FKX ON HISTORICOS 
    ( 
     COD_DISC ASC 
    ) TABLESPACE INDICES_ACAD
;

ALTER TABLE HISTORICOS 
    ADD CONSTRAINT HIST_PK PRIMARY KEY ( ANO, SEMESTRE, MAT_ALU, COD_DISC ) ;


CREATE TABLE MATRICULAS 
    ( 
     ANO NUMBER (4)  NOT NULL , 
     SEMESTRE NUMBER (1)  NOT NULL , 
     MAT_ALU NUMBER (10)  NOT NULL , 
     COD_DISC NUMBER (6)  NOT NULL , 
     NOTA_01 NUMBER (3,1) , 
     NOTA_02 NUMBER (3,1) , 
     NOTA_03 NUMBER (3,1) , 
     FALTAS_01 NUMBER (3) , 
     FALTAS_02 NUMBER (3) , 
     FALTAS_03 NUMBER (3) 
    ) TABLESPACE DADOS_ACAD
;



ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_NOTA_01_CK 
    CHECK (NOTA_01 BETWEEN 0 AND 10)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_NOTA_02_CK 
    CHECK (NOTA_02 BETWEEN 0 AND 10)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_NOTA_03_CK 
    CHECK (NOTA_02 BETWEEN 0 AND 10)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_FALTAS_01_CK 
    CHECK (FALTAS_01 >= 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_FALTAS_02_CK 
    CHECK (FALTAS_02 >= 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_FALTAS_03_CK 
    CHECK (FALTAS_02 >= 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;

CREATE UNIQUE INDEX MAT_PKX ON MATRICULAS 
    ( 
     ANO ASC , 
     SEMESTRE ASC , 
     MAT_ALU ASC , 
     COD_DISC ASC 
    ) TABLESPACE INDICES_ACAD 
;
CREATE INDEX MAT_PER_FKX ON MATRICULAS 
    ( 
     ANO ASC , 
     SEMESTRE ASC 
    ) TABLESPACE INDICES_ACAD
;
CREATE INDEX MAT_ALU_FKX ON MATRICULAS 
    ( 
     MAT_ALU ASC 
    ) TABLESPACE INDICES_ACAD
;
CREATE INDEX MAT_DISC_FKX ON MATRICULAS 
    ( 
     COD_DISC ASC 
    ) TABLESPACE INDICES_ACAD
;

ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_PK PRIMARY KEY ( ANO, SEMESTRE, MAT_ALU, COD_DISC ) ;


CREATE TABLE MATRIZES 
    ( 
     COD_DISC NUMBER (6)  NOT NULL , 
     COD_CURSO NUMBER (3)  NOT NULL , 
     PERIODO NUMBER (2)  NOT NULL 
    ) TABLESPACE DADOS_ACAD
;



ALTER TABLE MATRIZES 
    ADD CONSTRAINT MTZ_COD_DISC_CK 
    CHECK (COD_DISC > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE MATRIZES 
    ADD CONSTRAINT MTZ_COD_CURSO_CK 
    CHECK (COD_CURSO > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE MATRIZES 
    ADD CONSTRAINT MTZ_PERIODO_CK 
    CHECK (PERIODO between 1 and 15)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


CREATE INDEX MTZ_DISC_FKX ON MATRIZES 
    ( 
     COD_DISC ASC 
    ) TABLESPACE INDICES_ACAD
;
CREATE INDEX MTZ_CUR_FKX ON MATRIZES 
    ( 
     COD_CURSO ASC 
    ) TABLESPACE INDICES_ACAD
;

ALTER TABLE MATRIZES 
    ADD CONSTRAINT MTZ_PK PRIMARY KEY ( COD_DISC, COD_CURSO ) ;


CREATE TABLE PERIODOS_LETIVOS 
    ( 
     ANO NUMBER (4)  NOT NULL , 
     SEMESTRE NUMBER (1)  NOT NULL , 
     DAT_INI DATE  NOT NULL , 
     DAT_FIM DATE  NOT NULL 
    ) TABLESPACE DADOS_ACAD
;



ALTER TABLE PERIODOS_LETIVOS 
    ADD CONSTRAINT PER_ANO_CK 
    CHECK (ANO >= 1990)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE PERIODOS_LETIVOS 
    ADD CONSTRAINT PER_SEM_CK 
    CHECK (SEMESTRE IN ( 1, 2, 3, 4 ))
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE PERIODOS_LETIVOS 
    ADD CONSTRAINT PER_DATAS_CK 
    CHECK (DAT_INI <= DAT_FIM)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;

CREATE UNIQUE INDEX PER_PKX ON PERIODOS_LETIVOS 
    ( 
     ANO ASC , 
     SEMESTRE ASC 
    ) TABLESPACE INDICES_ACAD
;

ALTER TABLE PERIODOS_LETIVOS 
    ADD CONSTRAINT PER_PK PRIMARY KEY ( ANO, SEMESTRE ) ;


CREATE TABLE PROFESSORES 
    ( 
     IDT_PROF NUMBER (6)  NOT NULL , 
     MAT_PROF NUMBER (6)  NOT NULL , 
     NOM_PROF VARCHAR2 (50)  NOT NULL 
    ) TABLESPACE DADOS_ACAD
;



ALTER TABLE PROFESSORES 
    ADD CONSTRAINT PROF_IDT_PROF_CK 
    CHECK (IDT_PROF > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE PROFESSORES 
    ADD CONSTRAINT PROF_MAT_CK 
    CHECK (MAT_PROF > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;

CREATE UNIQUE INDEX PROF_PKX ON PROFESSORES 
    ( 
     IDT_PROF ASC 
    ) TABLESPACE INDICES_ACAD 
;

ALTER TABLE PROFESSORES 
    ADD CONSTRAINT PROF_PK PRIMARY KEY ( IDT_PROF ) ;


CREATE TABLE TURMAS 
    ( 
     ANO NUMBER (4)  NOT NULL , 
     SEMESTRE NUMBER (1)  NOT NULL , 
     COD_DISC NUMBER (6)  NOT NULL , 
     VAGAS NUMBER (3)  NOT NULL , 
     IDT_PROF NUMBER (6) 
    ) TABLESPACE DADOS_ACAD
;



ALTER TABLE TURMAS 
    ADD CONSTRAINT TUR_VAGAS_CK 
    CHECK (VAGAS >= 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;


ALTER TABLE TURMAS 
    ADD CONSTRAINT TUR_IDT_PROF_CK 
    CHECK (IDT_PROF > 0)
        INITIALLY IMMEDIATE 
        ENABLE 
        VALIDATE 
;

CREATE UNIQUE INDEX TURMAS_PKX ON TURMAS 
    ( 
     ANO ASC , 
     SEMESTRE ASC , 
     COD_DISC ASC 
    ) TABLESPACE INDICES_ACAD 
;

CREATE INDEX TUR_PER_FKX ON TURMAS 
    ( 
     ANO ASC , 
     SEMESTRE ASC 
    ) TABLESPACE INDICES_ACAD
;
CREATE INDEX TUR_DISC_FKX ON TURMAS 
    ( 
     COD_DISC ASC 
    ) TABLESPACE INDICES_ACAD
;
CREATE INDEX TUR_PROF_FKX ON TURMAS 
    ( 
     IDT_PROF ASC 
    ) TABLESPACE INDICES_ACAD
;

ALTER TABLE TURMAS 
    ADD CONSTRAINT TURMAS_PK PRIMARY KEY ( ANO, SEMESTRE, COD_DISC ) ;



ALTER TABLE ALUNOS 
    ADD CONSTRAINT ALU_CUR_FK FOREIGN KEY 
    ( 
     COD_CURSO
    ) 
    REFERENCES CURSOS 
    ( 
     COD_CURSO
    ) 
;


ALTER TABLE CURSOS 
    ADD CONSTRAINT CUR_PROF_FK FOREIGN KEY 
    ( 
     IDT_PROF
    ) 
    REFERENCES PROFESSORES 
    ( 
     IDT_PROF
    ) 
;


ALTER TABLE HISTORICOS 
    ADD CONSTRAINT HIST_ALU_FK FOREIGN KEY 
    ( 
     MAT_ALU
    ) 
    REFERENCES ALUNOS 
    ( 
     MAT_ALU
    ) 
;


ALTER TABLE HISTORICOS 
    ADD CONSTRAINT HIST_DISC_FK FOREIGN KEY 
    ( 
     COD_DISC
    ) 
    REFERENCES DISCIPLINAS 
    ( 
     COD_DISC
    ) 
;


ALTER TABLE HISTORICOS 
    ADD CONSTRAINT HIST_PER_FK FOREIGN KEY 
    ( 
     ANO,
     SEMESTRE
    ) 
    REFERENCES PERIODOS_LETIVOS 
    ( 
     ANO,
     SEMESTRE
    ) 
;


ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_ALU_FK FOREIGN KEY 
    ( 
     MAT_ALU
    ) 
    REFERENCES ALUNOS 
    ( 
     MAT_ALU
    ) 
;


ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_DISC_FK FOREIGN KEY 
    ( 
     COD_DISC
    ) 
    REFERENCES DISCIPLINAS 
    ( 
     COD_DISC
    ) 
;


ALTER TABLE MATRICULAS 
    ADD CONSTRAINT MAT_PER_FK FOREIGN KEY 
    ( 
     ANO,
     SEMESTRE
    ) 
    REFERENCES PERIODOS_LETIVOS 
    ( 
     ANO,
     SEMESTRE
    ) 
;


ALTER TABLE MATRIZES 
    ADD CONSTRAINT MTZ_CUR_FK FOREIGN KEY 
    ( 
     COD_CURSO
    ) 
    REFERENCES CURSOS 
    ( 
     COD_CURSO
    ) 
;


ALTER TABLE MATRIZES 
    ADD CONSTRAINT MTZ_DISC_FK FOREIGN KEY 
    ( 
     COD_DISC
    ) 
    REFERENCES DISCIPLINAS 
    ( 
     COD_DISC
    ) 
;


ALTER TABLE TURMAS 
    ADD CONSTRAINT TUR_DISC_FK FOREIGN KEY 
    ( 
     COD_DISC
    ) 
    REFERENCES DISCIPLINAS 
    ( 
     COD_DISC
    ) 
;


ALTER TABLE TURMAS 
    ADD CONSTRAINT TUR_PER_FK FOREIGN KEY 
    ( 
     ANO,
     SEMESTRE
    ) 
    REFERENCES PERIODOS_LETIVOS 
    ( 
     ANO,
     SEMESTRE
    ) 
;


ALTER TABLE TURMAS 
    ADD CONSTRAINT TUR_PROF_FK FOREIGN KEY 
    ( 
     IDT_PROF
    ) 
    REFERENCES PROFESSORES 
    ( 
     IDT_PROF
    ) 
;


    
    
    
    
    
    
    
    
    

-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             9
-- CREATE INDEX                            22
-- ALTER TABLE                             13
-- CREATE VIEW                              0
-- CREATE PROCEDURE                         0
-- CREATE TRIGGER                           0
-- CREATE STRUCTURED TYPE                   0
-- CREATE COLLECTION TYPE                   0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE SNAPSHOT                          0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
